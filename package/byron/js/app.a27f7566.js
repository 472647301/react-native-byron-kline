(function(e){function t(t){for(var a,r,o=t[0],u=t[1],c=t[2],l=0,h=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,o=1;o<i.length;o++){var u=i[o];0!==n[u]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},n={app:0},s=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=u;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"034f":function(e,t,i){"use strict";var a=i("85ec"),n=i.n(a);n.a},"85ec":function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);var a,n=i("2b0e"),s=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"tv_chart_container"}})])}],o=i("9ab4"),u=i("2fe1"),c=i("1e48"),d=i("a361"),l=i("c0e9"),h=i.n(l),f=["border_around_the_chart","use_localstorage_for_settings","header_symbol_search","timeframes_toolbar","header_chart_type","volume_force_overlay","header_saveload","header_resolutions","header_compare","header_undo_redo","header_screenshot","display_market_status","show_chart_property_page","show_logo_on_all_charts","control_bar","hide_last_na_study_output","header_widget","context_menus","source_selection_markers"],p=["hide_last_na_study_output"],v={"volume.volume.color.0":"#cb4848","volume.volume.color.1":"#01bd8b","volume.volume.transparency":50,"MACD.MACD.linewidth":4,"MACD.MACD.color":"#1c65a6","MACD.Signal.color":"#cc4a4a","MACD.Signal.linewidth":4,"MACD.Histogram.linewidth":4},b=i("3a34"),g=i.n(b),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.klineData=[],t.symbol="BTC/USDT",t.interval="15",t.awaitCount=0,t.isAwait=!0,t.locale="zh",t.debug=!1,t.device="rn",t.pricescale=100,t.studyList={},t.imageUrl="",t}return o["c"](t,e),t.prototype.sendMessageToNative=function(e){switch(this.device){case"rn":window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(e);break;case"ios":break;case"android":break}},t.prototype.receiveNativeNotification=function(e){var t=this,i=e.data||{};switch(e.event){case a.INIT:if(i.symbol&&(this.symbol=i.symbol),i.interval&&(this.interval=i.interval),i.debug){this.debug=i.debug;new g.a}i.locale&&(this.locale=i.locale),i.pricescale&&(this.pricescale=i.pricescale),i.librarySymbolInfo&&(this.librarySymbolInfo=i.librarySymbolInfo),i.datafeedConfiguration&&(this.datafeedConfiguration=i.datafeedConfiguration),i.chartingLibraryWidgetOptions&&(this.chartingLibraryWidgetOptions=i.chartingLibraryWidgetOptions),this.initDatafeed(),this.initTradingView();var n=JSON.stringify({status:!0,event:a.INIT});this.sendMessageToNative(n);break;case a.HISTORY:if(i.kline){this.klineData=i.kline,this.isAwait=!1;var s=JSON.stringify({status:!0,event:a.HISTORY});this.sendMessageToNative(s)}break;case a.SUBSCRIBE:if(i.kline&&!this.isAwait&&this.datafeed){this.datafeed.updateData({bars:i.kline,meta:{noData:!i.kline.length}});var r=JSON.stringify({status:!0,event:a.SUBSCRIBE});this.sendMessageToNative(r)}break;case a.TYPE:if(i.type&&this.widget){this.widget.chart().setChartType(i.type);var o=JSON.stringify({status:!0,event:a.TYPE});this.sendMessageToNative(o)}break;case a.STUDY:if(i.studyName&&this.widget){var u=i.studyName,c=i.studyValue||[],d=this.widget.chart();if(i.studyId&&this.studyList[i.studyId]){var l=d.getStudyById(this.studyList[i.studyId]),f=l.getInputValues();if(l.isUserEditEnabled()){f[0].value=Number(c[0]||0),f[1].value=Number(c[1]||0),l.setInputValues(f),console.info(" >> Update study success:",f);var p=JSON.stringify({status:!0,event:a.STUDY,type:"update"});this.sendMessageToNative(p)}}else d.createStudy(u,!1,!1,c,void 0,i.studyPlot).then((function(e){i.studyId&&e&&(t.studyList[i.studyId]=e);var n=JSON.stringify({status:!0,event:a.STUDY,type:"create"});t.sendMessageToNative(n)}))}break;case a.INTERVAL:if(i.interval&&this.widget){d=this.widget.chart();d.setResolution(i.interval,(function(){var e=JSON.stringify({status:!0,event:a.INTERVAL});t.sendMessageToNative(e)}))}break;case a.CREATE_SHOT:var v=window.innerWidth,b=window.innerHeight,y=document.createElement("canvas"),_=2;y.width=v*_,y.height=b*_,y.getContext("2d"),h()(document.body,{scale:_,canvas:y,logging:this.debug,width:v,height:b,useCORS:!0}).then((function(e){t.imageUrl=e.toDataURL("image/png");var i=JSON.stringify({status:!0,event:a.CREATE_SHOT});t.sendMessageToNative(i)}));break;case a.REMOVE_SHOT:this.imageUrl="";var m=JSON.stringify({status:!0,event:a.REMOVE_SHOT});this.sendMessageToNative(m);break;default:if(this.widget){var w=e.data,S=this.widget,T=S[e.event]?S[e.event]():{};T&&T[w.event]&&T[w.event](w.data)}break}},t.prototype.delayAwait=function(){var e=this;return new Promise((function(t,i){return e.awaitCount++,console.info(">> Await count: "+300*e.awaitCount+"ms"),e.isAwait?e.awaitCount<100?i():t():t(e.klineData)})).catch((function(){return new Promise((function(e){setTimeout(e,300)})).then((function(){return e.delayAwait()}))}))},t.prototype.initDatafeed=function(){var e=this,t=this.symbol.toLocaleUpperCase(),i={supports_search:!0,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","D","W","M"],supports_marks:!1,supports_timescale_marks:!1,supports_time:!1},a={name:t,full_name:t,description:t,type:t,session:"24x7",exchange:t,listed_exchange:t,timezone:"Asia/Shanghai",format:"price",pricescale:this.pricescale,minmov:1,has_intraday:!0,supported_resolutions:["1","5","15","30","60","D","W","M"]};this.datafeed=new d["Datafeed"]({history:function(t){return e.fetchHistoryData(t)},config:function(){var t=e.datafeedConfiguration;return new Promise((function(e){return e(Object.assign(i,t))}))},symbols:function(){var t=e.librarySymbolInfo;return new Promise((function(e){return e(Object.assign(a,t))}))}})},t.prototype.initTradingView=function(){return o["a"](this,void 0,void 0,(function(){var e,t;return o["d"](this,(function(i){switch(i.label){case 0:return this.datafeed?(e={autosize:!0,preset:"mobile",debug:this.debug,fullscreen:!0,symbol:this.symbol,interval:this.interval,container_id:"tv_chart_container",datafeed:this.datafeed,library_path:"./charting_library/",locale:this.locale,disabled_features:f,enabled_features:p,charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",theme:"Dark",timezone:"Asia/Shanghai",studies_overrides:v},t=this.chartingLibraryWidgetOptions,t&&t.disabled_features&&e.disabled_features&&(t.disabled_features=t.disabled_features.concat(e.disabled_features)),t&&t.enabled_features&&e.enabled_features&&(t.enabled_features=t.enabled_features.concat(e.enabled_features)),this.widget=new c["widget"](Object.assign(e,t)),[4,this.appendScript("bundles/byron-kline-chart-init.js")]):[2];case 1:return i.sent(),this.appendScript("bundles/runtime.d2ecd186b98a62a23c4b.js"),this.appendScript("bundles/vendors.f7dbb6a11b34b2534314.js"),this.appendScript("bundles/library.ac4616c46f24eefd2d78.js"),[2]}}))}))},t.prototype.fetchHistoryData=function(e){return o["a"](this,void 0,void 0,(function(){var t,i,n;return o["d"](this,(function(s){switch(s.label){case 0:return this.interval!==e.resolution&&(t=JSON.stringify({event:a.INTERVAL,data:e}),this.sendMessageToNative(JSON.stringify(t)),this.interval=e.resolution),i=JSON.stringify({event:a.HISTORY,data:e}),this.isAwait=!0,this.sendMessageToNative(i),[4,this.delayAwait()];case 1:return n=s.sent(),this.klineData=[],this.awaitCount=0,[2,{bars:n,meta:{noData:!n.length}}]}}))}))},t.prototype.appendScript=function(e){return new Promise((function(t){var i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=function(){t(),console.info(" >> "+e+" 初始化成功")}}))},t.prototype.created=function(){window.sendMessageToHtml=this.receiveNativeNotification.bind(this)},t.prototype.mounted=function(){},t=o["b"]([u["a"]],t),t}(n["a"]),_=y;(function(e){e[e["INIT"]=0]="INIT",e[e["HISTORY"]=1]="HISTORY",e[e["SUBSCRIBE"]=2]="SUBSCRIBE",e[e["TYPE"]=3]="TYPE",e[e["STUDY"]=4]="STUDY",e[e["INTERVAL"]=5]="INTERVAL",e[e["CREATE_SHOT"]=6]="CREATE_SHOT",e[e["REMOVE_SHOT"]=7]="REMOVE_SHOT"})(a||(a={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o["c"](t,e),t=o["b"]([Object(u["a"])({components:{KlineChart:_}})],t),t}(Object(u["b"])(_)),w=m,S=w,T=(i("034f"),i("2877")),O=Object(T["a"])(S,s,r,!1,null,null,null),N=O.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(N)}}).$mount("#app")}});