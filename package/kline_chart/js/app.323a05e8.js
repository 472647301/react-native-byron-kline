(function(e){function t(t){for(var i,s,o=t[0],c=t[1],d=t[2],l=0,h=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},r=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonpByron"]=window["webpackJsonpByron"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"034f":function(e,t,a){"use strict";var i=a("85ec"),n=a.n(i);n.a},"452c":function(e,t,a){},"85ec":function(e,t,a){},b0a0:function(e,t,a){"use strict";var i=a("452c"),n=a.n(i);n.a},cd49:function(e,t,a){"use strict";a.r(t);var i,n,r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"tv_chart_container"}}),e.imageUrl?a("img",{staticClass:"image",attrs:{src:e.imageUrl,alt:""},on:{click:function(t){e.imageUrl=""}}}):e._e()])},o=[],c=a("9ab4"),d=a("c458"),u=a.n(d),l=a("2fe1"),h=a("1e48"),_=a("a361"),f=a("c0e9"),p=a.n(f),v=["header_symbol_search","symbol_info","link_to_tradingview","header_compare","header_screenshot","use_localstorage_for_settings","save_chart_properties_to_local_storage","header_chart_type","display_market_status","symbol_search_hot_key","compare_symbol","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","timeframes_toolbar","header_fullscreen_button","legend_context_menu","volume_force_overlay","context_menus","source_selection_markers","header_saveload","header_resolutions","header_undo_redo","show_chart_property_page","show_logo_on_all_charts","control_bar","header_widget"],b=["hide_last_na_study_output"],g={"volume.volume.color.0":"#cb4848","volume.volume.color.1":"#01bd8b","volume.volume.transparency":50,"MACD.MACD.linewidth":4,"MACD.MACD.color":"#1c65a6","MACD.Signal.color":"#cc4a4a","MACD.Signal.linewidth":4,"MACD.Histogram.linewidth":4},y=a("3a34"),m=a.n(y),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.klineData=[],t.symbol="BTC/USDT",t.interval="15",t.awaitCount=0,t.awaitRequest=!1,t.locale="zh",t.debug=!1,t.device="rn",t.pricescale=100,t.studyList={},t.imageUrl="",t}return c["d"](t,e),t.prototype.sendMessageToNative=function(e){switch(this.device){case"rn":window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(e);break;case"ios":break;case"android":break}},t.prototype.receiveNativeNotification=function(e){var t=this,a=e.data||{};switch(console.info(" >> Receive native notification:",e),e.event){case n.INIT:if(a.symbol&&(this.symbol=a.symbol),a.interval&&(this.interval=a.interval),a.debug){this.debug=a.debug;var r=new m.a;console.info(r.version)}a.locale&&(this.locale=a.locale),a.pricescale&&(this.pricescale=a.pricescale),a.librarySymbolInfo&&(this.librarySymbolInfo=a.librarySymbolInfo),a.datafeedConfiguration&&(this.datafeedConfiguration=a.datafeedConfiguration),a.chartingLibraryWidgetOptions&&(this.chartingLibraryWidgetOptions=a.chartingLibraryWidgetOptions),this.initDatafeed(),this.initTradingView();var s=JSON.stringify({event:i.INIT_DONE});this.sendMessageToNative(s);break;case n.HISTORY:if(a.kline&&this.awaitRequest){this.klineData=a.kline,this.awaitRequest=!1;var o=JSON.stringify({event:i.HISTORY_DONE});this.sendMessageToNative(o)}break;case n.SUBSCRIBE:if(a.kline&&!this.awaitRequest&&this.datafeed){this.datafeed.updateData({bars:a.kline,meta:{noData:!a.kline.length}});var c=JSON.stringify({event:i.SUBSCRIBE_DONE});this.sendMessageToNative(c)}break;case n.TYPE:if(a.type&&this.widget){this.widget.chart().setChartType(a.type);var d=JSON.stringify({event:i.TYPE_DONE});this.sendMessageToNative(d)}break;case n.STUDY:if(a.studyName&&this.widget){var u=a.studyName,l=a.studyValue||[],h=this.widget.chart();h.createStudy(u,!1,!1,l,void 0,a.studyPlot).then((function(e){console.info(" >> Created study success:",a.studyId,e,l),a.studyId&&e&&(t.studyList[a.studyId]=e);var n=JSON.stringify({event:i.STUDY_DONE});t.sendMessageToNative(n)}))}break;case n.INTERVAL:if(a.interval&&this.widget){var _=this.widget.chart();_.setResolution(a.interval,(function(){_.executeActionById("timeScaleReset");var e=JSON.stringify({event:i.INTERVAL_DONE});t.sendMessageToNative(e)}))}break;case n.CREATE_SHOT:var f=window.innerWidth,v=window.innerHeight,b=document.createElement("canvas"),g=2;b.width=f*g,b.height=v*g,b.getContext("2d"),p()(document.body,{scale:g,canvas:b,logging:this.debug,width:f,height:v,useCORS:!0}).then((function(e){t.imageUrl=e.toDataURL("image/png");var a=JSON.stringify({event:i.CREATE_SHOT_DONE});t.sendMessageToNative(a)}));break;case n.REMOVE_SHOT:this.imageUrl="";var y=JSON.stringify({event:i.REMOVE_SHOT_DONE});this.sendMessageToNative(y);break;default:if(this.widget&&e.data.event){var O=this.widget,T=O[e.data.event]?O[e.data.event]():{};T&&T[e.data.data.event]&&T[e.data.data.event](a.data.data);var E=JSON.stringify({event:e.event});this.sendMessageToNative(E)}break}},t.prototype.delayAwait=function(){var e=this;return new Promise((function(t,a){return e.awaitCount++,console.info(">> Await count: "+300*e.awaitCount+"ms"),e.awaitRequest?e.awaitCount<100?a():t():t(e.klineData||[])})).catch((function(){return new Promise((function(e){setTimeout(e,300)})).then((function(){return e.delayAwait()}))}))},t.prototype.initDatafeed=function(){var e=this,t=this.symbol.toLocaleUpperCase(),a={supports_search:!0,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","D","W","M"],supports_marks:!1,supports_timescale_marks:!1,supports_time:!1},i={name:t,full_name:t,description:t,type:t,session:"24x7",exchange:t,listed_exchange:t,timezone:u.a.determine().name(),format:"",pricescale:this.pricescale,minmov:1,has_empty_bars:!0,has_intraday:!0,supported_resolutions:["1","5","15","30","60","D","W","M"]};this.datafeed=new _["Datafeed"]({history:function(t){return e.fetchHistoryData(t)},config:function(){var t=e.datafeedConfiguration;return new Promise((function(e){return e(Object.assign(a,t))}))},symbols:function(){var t=e.librarySymbolInfo;return new Promise((function(e){return e(Object.assign(i,t))}))}})},t.prototype.initTradingView=function(){return c["b"](this,void 0,void 0,(function(){var e,t;return c["e"](this,(function(a){switch(a.label){case 0:return this.datafeed?(e={autosize:!0,preset:"mobile",debug:this.debug,fullscreen:!0,symbol:this.symbol,interval:this.interval,container_id:"tv_chart_container",datafeed:this.datafeed,library_path:"./charting_library/",locale:this.locale,disabled_features:v,enabled_features:b,charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",theme:"Dark",timezone:u.a.determine().name(),studies_overrides:g},t=this.chartingLibraryWidgetOptions,t&&t.disabled_features&&e.disabled_features&&(t.disabled_features=t.disabled_features.concat(e.disabled_features)),t&&t.enabled_features&&e.enabled_features&&(t.enabled_features=t.enabled_features.concat(e.enabled_features)),this.widget=new h["widget"](Object.assign(e,t)),[4,this.appendScript("bundles/byron-kline-chart-init.js")]):[2];case 1:return a.sent(),this.appendScript("bundles/runtime.d2ecd186b98a62a23c4b.js"),this.appendScript("bundles/vendors.f7dbb6a11b34b2534314.js"),this.appendScript("bundles/library.ac4616c46f24eefd2d78.js"),[2]}}))}))},t.prototype.fetchHistoryData=function(e){return c["b"](this,void 0,void 0,(function(){var t,a,n;return c["e"](this,(function(r){switch(r.label){case 0:return this.interval!==e.resolution&&(t=JSON.stringify({event:i.INTERVAL_SWITCH,data:c["a"]({},e,{oldResolution:this.interval})}),this.sendMessageToNative(t),this.interval=e.resolution),a=JSON.stringify({event:i.FETCH_HISTORY,data:e}),this.awaitRequest||(this.awaitRequest=!0),this.sendMessageToNative(a),[4,this.delayAwait()];case 1:return n=r.sent(),this.klineData=[],this.awaitCount=0,[2,{bars:n,meta:{noData:!n.length}}]}}))}))},t.prototype.appendScript=function(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,document.head.appendChild(a),a.onload=function(){t(),console.info(" >> "+e+" 初始化成功")}}))},t.prototype.created=function(){window.sendMessageToHtml=this.receiveNativeNotification.bind(this)},t.prototype.mounted=function(){},t=c["c"]([l["a"]],t),t}(r["a"]),T=O;(function(e){e["INIT_DONE"]="INIT_DONE",e["FETCH_HISTORY"]="FETCH_HISTORY",e["HISTORY_DONE"]="HISTORY_DONE",e["SUBSCRIBE_DONE"]="SUBSCRIBE_DONE",e["TYPE_DONE"]="TYPE_DONE",e["STUDY_DONE"]="STUDY_DONE",e["INTERVAL_DONE"]="INTERVAL_DONE",e["INTERVAL_SWITCH"]="INTERVAL_SWITCH",e["CREATE_SHOT_DONE"]="CREATE_SHOT_DONE",e["REMOVE_SHOT_DONE"]="REMOVE_SHOT_DONE"})(i||(i={})),function(e){e["INIT"]="INIT",e["HISTORY"]="HISTORY",e["SUBSCRIBE"]="SUBSCRIBE",e["TYPE"]="TYPE",e["STUDY"]="STUDY",e["INTERVAL"]="INTERVAL",e["CREATE_SHOT"]="CREATE_SHOT",e["REMOVE_SHOT"]="REMOVE_SHOT",e["DEFAULT"]="DEFAULT"}(n||(n={}));var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c["d"](t,e),t=c["c"]([Object(l["a"])({components:{KlineChart:T}})],t),t}(Object(l["b"])(T)),w=E,S=w,N=(a("034f"),a("b0a0"),a("2877")),D=Object(N["a"])(S,s,o,!1,null,null,null),R=D.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(R)}}).$mount("#app")}});