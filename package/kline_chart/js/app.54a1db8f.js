(function(e){function t(t){for(var a,r,o=t[0],c=t[1],d=t[2],l=0,h=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,d||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},n={app:0},s=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonpByron"]=window["webpackJsonpByron"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"034f":function(e,t,i){"use strict";var a=i("85ec"),n=i.n(a);n.a},"452c":function(e,t,i){},"85ec":function(e,t,i){},b0a0:function(e,t,i){"use strict";var a=i("452c"),n=i.n(a);n.a},cd49:function(e,t,i){"use strict";i.r(t);var a,n,s=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"tv_chart_container"}}),e.imageUrl?i("img",{staticClass:"image",attrs:{src:e.imageUrl,alt:""},on:{click:function(t){e.imageUrl=""}}}):e._e()])},o=[],c=i("9ab4"),d=i("2fe1"),u=i("1e48"),l=i("a361"),h=i("c0e9"),f=i.n(h),p=["border_around_the_chart","use_localstorage_for_settings","header_symbol_search","timeframes_toolbar","header_chart_type","volume_force_overlay","header_saveload","header_resolutions","header_compare","header_undo_redo","header_screenshot","display_market_status","show_chart_property_page","show_logo_on_all_charts","control_bar","hide_last_na_study_output","header_widget","context_menus","source_selection_markers"],_=["hide_last_na_study_output"],v={"volume.volume.color.0":"#cb4848","volume.volume.color.1":"#01bd8b","volume.volume.transparency":50,"MACD.MACD.linewidth":4,"MACD.MACD.color":"#1c65a6","MACD.Signal.color":"#cc4a4a","MACD.Signal.linewidth":4,"MACD.Histogram.linewidth":4},b=i("3a34"),g=i.n(b),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.klineData=[],t.symbol="BTC/USDT",t.interval="15",t.awaitCount=0,t.isAwait=!0,t.locale="zh",t.debug=!1,t.device="rn",t.pricescale=100,t.studyList={},t.imageUrl="",t.isFirst=!0,t}return c["c"](t,e),t.prototype.sendMessageToNative=function(e){switch(this.device){case"rn":window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(e);break;case"ios":break;case"android":break}},t.prototype.receiveNativeNotification=function(e){var t=this,i=e.data||{};switch(e.event){case n.INIT:if(i.symbol&&(this.symbol=i.symbol),i.interval&&(this.interval=i.interval),i.debug){this.debug=i.debug;var s=new g.a;console.info(s.version)}i.locale&&(this.locale=i.locale),i.pricescale&&(this.pricescale=i.pricescale),i.librarySymbolInfo&&(this.librarySymbolInfo=i.librarySymbolInfo),i.datafeedConfiguration&&(this.datafeedConfiguration=i.datafeedConfiguration),i.chartingLibraryWidgetOptions&&(this.chartingLibraryWidgetOptions=i.chartingLibraryWidgetOptions),this.initDatafeed(),this.initTradingView();var r=JSON.stringify({event:a.INIT_DONE});this.sendMessageToNative(r);break;case n.HISTORY:if(i.kline&&this.isAwait){this.klineData=i.kline,this.isAwait=!1;var o=JSON.stringify({event:a.HISTORY_DONE});this.sendMessageToNative(o)}break;case n.SUBSCRIBE:if(i.kline&&!this.isAwait&&this.datafeed){this.datafeed.updateData({bars:i.kline,meta:{noData:!i.kline.length}});var c=JSON.stringify({event:a.SUBSCRIBE_DONE});this.sendMessageToNative(c)}break;case n.TYPE:if(i.type&&this.widget){this.widget.chart().setChartType(i.type);var d=JSON.stringify({event:a.TYPE_DONE});this.sendMessageToNative(d)}break;case n.STUDY:if(i.studyName&&this.widget){var u=i.studyName,l=i.studyValue||[],h=this.widget.chart();if(i.studyId&&this.studyList[i.studyId]){var p=h.getStudyById(this.studyList[i.studyId]),_=p.getInputValues();if(p.isUserEditEnabled()){_[0].value=Number(l[0]||0),_[1].value=Number(l[1]||0),p.setInputValues(_),console.info(" >> Update study success:",_);var v=JSON.stringify({event:a.STUDY_DONE});this.sendMessageToNative(v)}}else h.createStudy(u,!1,!1,l,void 0,i.studyPlot).then((function(e){i.studyId&&e&&(t.studyList[i.studyId]=e);var n=JSON.stringify({event:a.STUDY_DONE});t.sendMessageToNative(n)}))}break;case n.INTERVAL:if(i.interval&&this.widget){h=this.widget.chart();h.setResolution(i.interval,(function(){var e=JSON.stringify({event:a.INTERVAL_DONE});t.sendMessageToNative(e)}))}break;case n.CREATE_SHOT:var b=window.innerWidth,y=window.innerHeight,O=document.createElement("canvas"),T=2;O.width=b*T,O.height=y*T,O.getContext("2d"),f()(document.body,{scale:T,canvas:O,logging:this.debug,width:b,height:y,useCORS:!0}).then((function(e){t.imageUrl=e.toDataURL("image/png");var i=JSON.stringify({event:a.CREATE_SHOT_DONE});t.sendMessageToNative(i)}));break;case n.REMOVE_SHOT:this.imageUrl="";var m=JSON.stringify({event:a.REMOVE_SHOT_DONE});this.sendMessageToNative(m);break;default:if(this.widget&&e.data.event){var E=this.widget,S=E[e.data.event]?E[e.data.event]():{};S&&S[e.data.data.event]&&S[e.data.data.event](i.data.data);var N=JSON.stringify({event:e.event});this.sendMessageToNative(N)}break}},t.prototype.delayAwait=function(){var e=this;return new Promise((function(t,i){return e.awaitCount++,console.info(">> Await count: "+300*e.awaitCount+"ms"),e.isAwait?e.awaitCount<100?i():t():t(e.klineData)})).catch((function(){return new Promise((function(e){setTimeout(e,300)})).then((function(){return e.delayAwait()}))}))},t.prototype.initDatafeed=function(){var e=this,t=this.symbol.toLocaleUpperCase(),i={supports_search:!0,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","D","W","M"],supports_marks:!1,supports_timescale_marks:!1,supports_time:!1},a={name:t,full_name:t,description:t,type:t,session:"24x7",exchange:t,listed_exchange:t,timezone:"Asia/Shanghai",format:"price",pricescale:this.pricescale,minmov:1,has_intraday:!0,supported_resolutions:["1","5","15","30","60","D","W","M"]};this.datafeed=new l["Datafeed"]({history:function(t){return e.fetchHistoryData(t)},config:function(){var t=e.datafeedConfiguration;return new Promise((function(e){return e(Object.assign(i,t))}))},symbols:function(){var t=e.librarySymbolInfo;return new Promise((function(e){return e(Object.assign(a,t))}))}})},t.prototype.initTradingView=function(){return c["a"](this,void 0,void 0,(function(){var e,t;return c["d"](this,(function(i){switch(i.label){case 0:return this.datafeed?(e={autosize:!0,preset:"mobile",debug:this.debug,fullscreen:!0,symbol:this.symbol,interval:this.interval,container_id:"tv_chart_container",datafeed:this.datafeed,library_path:"./charting_library/",locale:this.locale,disabled_features:p,enabled_features:_,charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",theme:"Dark",timezone:"Asia/Shanghai",studies_overrides:v},t=this.chartingLibraryWidgetOptions,t&&t.disabled_features&&e.disabled_features&&(t.disabled_features=t.disabled_features.concat(e.disabled_features)),t&&t.enabled_features&&e.enabled_features&&(t.enabled_features=t.enabled_features.concat(e.enabled_features)),this.widget=new u["widget"](Object.assign(e,t)),[4,this.appendScript("bundles/byron-kline-chart-init.js")]):[2];case 1:return i.sent(),this.appendScript("bundles/runtime.d2ecd186b98a62a23c4b.js"),this.appendScript("bundles/vendors.f7dbb6a11b34b2534314.js"),this.appendScript("bundles/library.ac4616c46f24eefd2d78.js"),[2]}}))}))},t.prototype.fetchHistoryData=function(e){return c["a"](this,void 0,void 0,(function(){var t,i,n;return c["d"](this,(function(s){switch(s.label){case 0:return this.interval!==e.resolution&&(t=JSON.stringify({event:a.INTERVAL_SWITCH,data:Object.assign(e,{oldResolution:this.interval})}),this.sendMessageToNative(JSON.stringify(t)),this.interval=e.resolution),i=JSON.stringify({event:a.FETCH_HISTORY,data:Object.assign(e,{isFirst:this.isFirst})}),this.isFirst&&(this.isFirst=!1),this.isAwait||(this.isAwait=!0),this.sendMessageToNative(i),[4,this.delayAwait()];case 1:return n=s.sent(),this.klineData=[],this.awaitCount=0,[2,{bars:n,meta:{noData:!n.length}}]}}))}))},t.prototype.appendScript=function(e){return new Promise((function(t){var i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=function(){t(),console.info(" >> "+e+" 初始化成功")}}))},t.prototype.created=function(){window.sendMessageToHtml=this.receiveNativeNotification.bind(this)},t.prototype.mounted=function(){},t=c["b"]([d["a"]],t),t}(s["a"]),O=y;(function(e){e[e["INIT_DONE"]=0]="INIT_DONE",e[e["FETCH_HISTORY"]=1]="FETCH_HISTORY",e[e["HISTORY_DONE"]=2]="HISTORY_DONE",e[e["SUBSCRIBE_DONE"]=3]="SUBSCRIBE_DONE",e[e["TYPE_DONE"]=4]="TYPE_DONE",e[e["STUDY_DONE"]=5]="STUDY_DONE",e[e["INTERVAL_DONE"]=6]="INTERVAL_DONE",e[e["INTERVAL_SWITCH"]=7]="INTERVAL_SWITCH",e[e["CREATE_SHOT_DONE"]=8]="CREATE_SHOT_DONE",e[e["REMOVE_SHOT_DONE"]=9]="REMOVE_SHOT_DONE"})(a||(a={})),function(e){e[e["INIT"]=0]="INIT",e[e["HISTORY"]=1]="HISTORY",e[e["SUBSCRIBE"]=2]="SUBSCRIBE",e[e["TYPE"]=3]="TYPE",e[e["STUDY"]=4]="STUDY",e[e["INTERVAL"]=5]="INTERVAL",e[e["CREATE_SHOT"]=6]="CREATE_SHOT",e[e["REMOVE_SHOT"]=7]="REMOVE_SHOT",e[e["DEFAULT"]=8]="DEFAULT"}(n||(n={}));var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c["c"](t,e),t=c["b"]([Object(d["a"])({components:{KlineChart:O}})],t),t}(Object(d["b"])(O)),m=T,E=m,S=(i("034f"),i("b0a0"),i("2877")),N=Object(S["a"])(E,r,o,!1,null,null,null),w=N.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(w)}}).$mount("#app")}});